<!--
FPempresa
Copyright (C) 2020  Lorenzo González

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see http://www.gnu.org/licenses/
-->

<div class="row">
    <div class="col-xs-12 form__container" >
        <div>
            <ix3-business-messages></ix3-business-messages>
            <form class="form-horizontal" name="mainForm" id="mainForm"  ix3-form>
                <fieldset>
                    <legend class="form__title">Usuario de tipo "{{model.getTipoUsuarioDescription()}}"</legend>


                    <div class="row" >
                        <div class="col-xs-12 form-horizontal">
                            <div class="form-group">
                                <label for="nombre" class="col-xs-3  control-label" ix3-label></label>
                                <div class="col-xs-9 ">
                                    <input ng-model="model.nombre" type="text" class="form-control" id="nombre" name="nombre"  ix3-validation>
                                </div>
                            </div> 
                        </div>
                    </div>
                    <div class="row" >                        
                        <div class="col-xs-12 form-horizontal">
                            <div class="form-group">
                                <label for="apellidos" class="col-xs-3  control-label" ix3-label></label>
                                <div class="col-xs-9 ">
                                    <input ng-model="model.apellidos" type="text" class="form-control" id="apellidos" name="apellidos"  ix3-validation>
                                </div>
                            </div> 
                        </div>
                    </div>
                    <div class="row" >
                        <div class="col-xs-12 form-horizontal">
                            <div class="form-group">
                                <label for="email" class="col-xs-3  control-label" ix3-label></label>
                                <div class="col-xs-9 ">
                                    <input ng-model="model.email" type="text" class="form-control" id="email" name="email"  ix3-validation>
                                </div>
                            </div> 
                        </div>
                    </div>                   
                    <legend class="form__title">Fechas</legend>
                    <div class="row" >
                        <div class="col-xs-6 form-horizontal">
                            <div class="form-group">
                                <label for="fecha" class="col-xs-6  control-label" ix3-label></label>
                                <div class="col-xs-6 ">
                                    <input ng-model="model.fecha" type="text" class="form-control" id="fecha" name="fecha"  ix3-date="dd/MM/yyyy HH:mm:ss"  ix3-validation readonly="true">
                                </div>
                            </div> 
                        </div>
                        <div class="col-xs-6 form-horizontal">
                            <div class="form-group">
                                <label for="fechaUltimoAcceso" class="col-xs-6  control-label" ix3-label></label>
                                <div class="col-xs-6 ">
                                    <input ng-model="model.fechaUltimoAcceso" type="text" class="form-control" id="fechaUltimoAcceso" name="fechaUltimoAcceso"  ix3-date="dd/MM/yyyy HH:mm:ss"  ix3-validation readonly="true">
                                </div>
                            </div> 
                        </div>
                    </div>  
                    
                    <legend class="form__title" ng-show="controllerAction === 'NEW'" >Contraseña</legend>
                    
                    <div class="row" ng-show="controllerAction === 'NEW'" >
                        <div class="col-xs-12 col-sm-6  form-horizontal">
                            <div class="form-group">
                                <label for="password" class="col-xs-3 col-sm-6 control-label">Contrase&ntilde;a</label>
                                <div class="col-xs-9 col-sm-6">
                                    <input ng-model="model.password" type="password" class="form-control" id="password" name="password" ng-required="controllerAction === 'NEW'"  >
                                </div>
                            </div> 
                        </div>
                        <div class="col-xs-12 col-sm-6  form-horizontal">
                            <div class="form-group">
                                <label for="confirmPassword" class="col-xs-3 col-sm-6 control-label">Confirmar contrase&ntilde;a</label>
                                <div class="col-xs-9 col-sm-6">
                                    <input ng-model="model.confirmPassword" type="password" class="form-control" id="confirmPassword" name="confirmPassword" ng-required="controllerAction === 'NEW'" >
                                </div>
                            </div> 
                        </div>  
                    </div>
                    <legend class="form__title"  ng-show="controllerAction !== 'NEW'">Validado EMail</legend>
                    <div class="row" ng-show="controllerAction !== 'NEW'" >

                        <div class="col-xs-6 form-horizontal">
                            <div class="form-group">
                                <label for="fechaUltimoEnvioCorreoValidacionEmail" class="col-xs-6  control-label" ix3-label></label>
                                <div class="col-xs-6 ">
                                    <input ng-model="model.fechaUltimoEnvioCorreoValidacionEmail" type="text" class="form-control" id="fechaUltimoEnvioCorreoValidacionEmail" name="fechaUltimoEnvioCorreoValidacionEmail"  ix3-date="dd/MM/yyyy HH:mm:ss"  ix3-validation ng-required="false"  >
                                </div>
                            </div> 
                        </div>
                        <div class="col-xs-6 form-horizontal">
                            <div class="form-group">
                                <label for="numEnviosCorreoValidacionEmail" class="col-xs-6  control-label" ix3-label></label>
                                <div class="col-xs-6 ">
                                    <input ng-model="model.numEnviosCorreoValidacionEmail" type="text" class="form-control" id="numEnviosCorreoValidacionEmail" name="numEnviosCorreoValidacionEmail"    ix3-validation  ng-required="false" >
                                </div>
                            </div> 
                        </div>
                    </div>
                    <div class="row" ng-show="controllerAction !== 'NEW'">
                        <div class="col-xs-9  col-xs-offset-3 form-horizontal">
                            <div class="checkbox">
                                <label>
                                    <input ng-model="model.validadoEmail" type="checkbox" id="validadoEmail" name="validadoEmail"  ix3-validation >
                                    Validado el correo electrónico
                                </label>
                            </div>
                        </div> 
                    </div>                                         
                    <div class="row" ng-show="controllerAction !== 'NEW'">
                        <div class="col-xs-10  col-xs-offset-2 form-horizontal">
                            <br>
                            <spam ix3-visibility="model.validadoEmail!==true">{{locationOrigin()}}{{getContextPath()}}/site/index.html#!/validar-email/{{model.idIdentity}}/{{model.claveValidacionEmail}}</spam>
                        </div> 
                    </div> 
                    <legend class="form__title"  ng-show="controllerAction !== 'NEW'">Bloqueo de cuenta</legend>
                    <div class="row" ng-show="controllerAction !== 'NEW'" >

                        <div class="col-xs-6 form-horizontal">
                            <div class="form-group">
                                <label for="lockedUntil" class="col-xs-6  control-label" ix3-label></label>
                                <div class="col-xs-6 ">
                                    <input ng-model="model.lockedUntil" type="text" class="form-control" id="lockedUntil" name="lockedUntil"  ix3-date="dd/MM/yyyy HH:mm:ss"  ix3-validation ng-required="false"  readonly="true">
                                </div>
                            </div> 
                        </div>
                        <div class="col-xs-6 form-horizontal">
                            <div class="form-group">
                                <label for="numFailedLogins" class="col-xs-6  control-label" ix3-label></label>
                                <div class="col-xs-6 ">
                                    <input ng-model="model.numFailedLogins" type="text" class="form-control" id="numFailedLogins" name="numFailedLogins"    ix3-validation  ng-required="false" readonly="true">
                                </div>
                            </div> 
                        </div>
                    </div>
                    <div class="row" ng-show="controllerAction === 'EDIT'" >
                        <div class="col-xs-9 col-xs-offset-3 form-horizontal" >
                            <button type="button"  class="btn form__button form__button--default" ng-click="buttonDesbloquear()">Desbloquear</button>
                        </div>
                    </div>                    
                    <legend class="form__title" ng-show="model.tipoUsuario === 'CENTRO'">Centro al que pertenece</legend>
                    <div class="row" ng-show="model.tipoUsuario === 'CENTRO'" >
                        <div class="col-xs-12 col-sm-6  form-horizontal">
                            <div class="form-group">
                                <label for="model.centro.direccion.municipio.provincia" class="col-xs-3 col-sm-6 control-label" ix3-label></label>
                                <div class="col-xs-9 col-sm-6">
                                    <select ng-model="model.centro.direccion.municipio.provincia" id="model.centro.direccion.municipio.provincia" name="model.centro.direccion.municipio.provincia" class="form-control" ix3-clear="model.tipoUsuario!=='CENTRO'" ix3-options  >
                                        <option value="">-- Elige Opcion --</option>
                                    </select>
                                </div>
                            </div> 
                        </div>
                        <div class="col-xs-12 col-sm-6  form-horizontal">
                            <div class="form-group">
                                <label for="model.centro" class="col-xs-3 col-sm-6 control-label" >Nombre</label>
                                <div class="col-xs-9 col-sm-6">
                                    <select ng-model="model.centro" id="model.centro" name="model.centro" class="form-control" ix3-clear="model.tipoUsuario!=='CENTRO'" ix3-options="ix3OrderBy:'nombre' | ix3When:'idCentro':'>':0" ix3-validation ix3-options-depend='{"direccion.municipio.provincia":model.centro.direccion.municipio.provincia}' >
                                        <option value="">-- Elige Opcion --</option>
                                    </select>
                                </div>
                            </div> 
                        </div> 
                    </div> 
                    <br>
                    <legend class="form__title" ng-show="model.tipoUsuario === 'TITULADO'">Curriculum del Titulado</legend>
                    <div class="row" ng-show="model.tipoUsuario === 'TITULADO'" >
                        <div class="col-xs-12">
                            <a   class="" ng-href="{{'#!/usuario/curriculum/titulado/edit/'+model.titulado.idTitulado}}">Datos personales</a>
                        </div>
                          
                    </div>
                    <br>
                    <div class="row" ng-show="model.tipoUsuario === 'TITULADO'" >
                        <div class="col-xs-12 col-sm-3">
                            <a   class="" ng-href="{{'#!/usuario/curriculum/formacionacademica/search/titulado.idTitulado/'+model.titulado.idTitulado}}">Formaci&oacute;n académica</a> 
                        </div>                        
                        <div class="col-xs-12 col-sm-3">
                            <a   class="" ng-href="{{'#!/usuario/curriculum/experiencialaboral/search/titulado.idTitulado/'+model.titulado.idTitulado}}">Experiencia laboral</a>
                        </div>
                        <div class="col-xs-12 col-sm-3">
                            <a   class="" ng-href="{{'#!/usuario/curriculum/tituloidioma/search/titulado.idTitulado/'+model.titulado.idTitulado}}" >Idiomas</a>
                        </div> 
                    </div>
                    <br>
                    <legend class="form__title" ng-show="model.tipoUsuario === 'EMPRESA'">Empresa a la que pertenece</legend>
                    <div class="row" ng-show="model.tipoUsuario === 'EMPRESA'" >
                        <div class="col-xs-12 col-sm-6  form-horizontal">
                            <div class="form-group">
                                <label for="model.empresa.direccion.municipio.provincia" class="col-xs-3 col-sm-6 control-label" ix3-label></label>
                                <div class="col-xs-9 col-sm-6">
                                    <select ng-model="model.empresa.direccion.municipio.provincia" id="model.empresa.direccion.municipio.provincia" name="model.empresa.direccion.municipio.provincia" class="form-control"  ix3-clear="model.tipoUsuario!=='EMPRESA'"  ix3-options  >
                                        <option value="">-- Elige Opcion --</option>
                                    </select>
                                </div>
                            </div> 
                        </div>
                        <div class="col-xs-12 col-sm-6  form-horizontal">
                            <div class="form-group">
                                <label for="model.empresa" class="col-xs-3 col-sm-6 control-label" ix3-label>Nombre</label>
                                <div class="col-xs-9 col-sm-6">
                                    <select ng-model="model.empresa" id="model.empresa" name="model.empresa" class="form-control" ix3-clear="model.tipoUsuario!=='EMPRESA'" ix3-options ix3-validation ix3-options-depend='{"direccion.municipio.provincia":model.empresa.direccion.municipio.provincia}' >
                                        <option value="">-- Elige Opcion --</option>
                                    </select>
                                </div>
                            </div> 
                        </div>  
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-xs-12 col-sm-6  form-horizontal" ng-show="(model.tipoUsuario === 'CENTRO')">
                            <div class="form-group">
                                <label for="estadoUsuario" class="col-xs-3 col-sm-6 control-label" >Estado en el Centro</label>
                                <div class="col-xs-9 col-sm-6">
                                    <select  ng-model="model.estadoUsuario" id="estadoUsuario" name="estadoUsuario" class="form-control" ix3-options ix3-validation >
                                        <option value="">-- Elige Opcion --</option>
                                    </select>
                                </div>
                            </div> 
                        </div> 
                    </div>
                    <div class="row" >
                        <div class="col-xs-12 ">                             
                            <crud-detail-buttons class="pull-right" >
                                <button type="button" ng-show="controllerAction === 'EDIT'" class="btn form__button form__button--default" ng-click="cambiarContrasenya()" >Cambiar Contrase&ntilde;a</button>
                            </crud-detail-buttons>
                        </div>
                    </div>                    
                </fieldset>
            </form>
        </div>
    </div>
</div>

