<!--
FPempresa
Copyright (C) 2020  Lorenzo González

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see http://www.gnu.org/licenses/
-->

<div class="row">
    <div class="col-xs-12 form__container" >
        <div>
            <ix3-business-messages></ix3-business-messages>
            <form name="mainForm" id="mainForm"  ix3-form>
                <fieldset>
                    <legend class="form__title">Oferta</legend>
                    <br>
                    <div class="row" >
                        <div class="col-xs-12 form-horizontal"> 
                            <div class="form-group">
                                <label for="puesto" class="col-xs-3  control-label" ix3-label></label>
                                <div class="col-xs-9 ">
                                    <input ng-model="model.puesto" type="text" class="form-control" id="puesto" name="puesto"  ix3-validation>
                                </div>
                            </div> 
                        </div>
                    </div>

                    <div class="row" >
                        <div class="col-xs-12 form-horizontal"> 
                            <div class="form-group">
                                <label for="descripcion" class="col-xs-3  control-label" ix3-label></label>
                                <div class="col-xs-9">
                                    <textarea ng-model="model.descripcion" class="form-control" rows="7"  id="descripcion" name="descripcion"  ix3-validation></textarea>
                                </div>
                            </div> 
                        </div>
                    </div>  
                    <div class="row" >
                        <div class="col-xs-12 col-xs-12 col-xs-offset-3  form-horizontal">
                            <div class="checkbox">
                                <label>
                                    <input ng-model="model.cerrada" type="checkbox" >
                                    Oferta cerrada. Ya no se permitir&aacute; a&ntilde;adir nuevos candidatos.
                                </label>
                            </div>
                        </div> 
                    </div>                     
                    <br>
                    <legend class="form__title">Municipio del lugar de trabajo</legend>
                    <div class="row" >
                        <div class="col-xs-12 col-sm-6  form-horizontal">
                            <div class="form-group">
                                <label for="municipio.provincia" class="col-xs-3 col-sm-6 control-label" ix3-label></label>
                                <div class="col-xs-9 col-sm-6">
                                    <select ng-model="model.municipio.provincia" id="municipio.provincia" name="municipio.provincia" class="form-control" ix3-options="orderBy:'descripcion'" ix3-validation >
                                        <option value="">-- Elige Opcion --</option>
                                    </select>
                                </div>
                            </div> 
                        </div>
                        <div class="col-xs-12 col-sm-6  form-horizontal">
                            <div class="form-group">
                                <label for="municipio" class="col-xs-3 col-sm-6 control-label" ix3-label></label>
                                <div class="col-xs-9 col-sm-6">
                                    <select ng-model="model.municipio" id="municipio" name="municipio" class="form-control" ix3-options="orderBy:'descripcion'"  ix3-validation ix3-options-depend="{provincia:model.municipio.provincia}" >
                                        <option value="">-- Elige Opcion --</option>
                                    </select>
                                </div>
                            </div> 
                        </div> 
                    </div> 
                    <legend class="form__title">Destinado a personas de</legend>                    
                    <div class="row" >
                        <div class="col-xs-12 form-horizontal"> 
                            <div class="form-group">
                                <label for="familia" class="col-sm-3  control-label" ix3-label ></label>
                                <div class="col-sm-7">
                                    <select ng-model="model.familia" id="familia" name="familia" class="form-control" ix3-options="orderBy:'descripcion'"  >
                                        <option value="">-- Elige Opcion --</option>
                                    </select>
                                </div>
                            </div> 
                        </div> 
                    </div>    

                    <div class="row" >
                        <div class="col-xs-9 col-xs-offset-3">
                            <div >
                                <p class="form__text form__text--help"><i class="fa fa-warning"></i>&nbsp;Recuerda que solo podrán ver la oferta aquellos titulados que posean alguno de los ciclos que vas de indicar </p> 
                            </div>
                        </div>
                    </div>


                    <div class="row" >
                        <div class="col-xs-12  form-horizontal">
                            <div class="form-group">
                                <label class="col-xs-3  control-label"  >Ciclos</label>
                                <div class="col-xs-9">
                                    <table class="table table-bordered">
                                        <thead>                        
                                            <tr class="data-table__head">
                                                <th style="width:   1%;text-align: center"><input type="checkbox" ng-model="todosCiclos" ng-click="checkTodosCiclos(todosCiclos)"></th>
                                                <th style="width:   55%;text-align: center">Ciclo</th>
                                                <th style="width:   27%;text-align: center">Grado</th>
                                                <th style="width:   18%;text-align: center">Ley Educativa</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="ciclo in ciclos" class="data-table__row">
                                                <td ><input type="checkbox" checklist-model="model.ciclos" checklist-value="ciclo" checklist-comparator="compareCiclo"></td>
                                                <td >{{ciclo.descripcion}}</td>
                                                <td >{{ciclo.grado.toString()}}</td>                   
                                                <td >{{ciclo.leyEducativa.toString()}}</td>                             
                                            </tr>
                                        </tbody>
                                    </table> 
                                </div>
                            </div> 
                        </div> 
                    </div>  




                    <div class="row" ng-show="controllerAction !== 'NEW'" >
                        <div class="col-xs-12  form-horizontal">

                            <legend class="form__title">Candidatos</legend>

                            <div class="form-group">
                                <div class="col-sm-7 col-sm-offset-4 col-xs-12 ">

                                    <div class="panel panel-green">
                                        <div class="panel-heading">
                                            <div class="row">
                                                <div class="col-xs-3">
                                                    <i class="fa fa-archive fa-4x"></i>
                                                </div>
                                                <div class="col-xs-9 text-right">
                                                    <div class="section__text--size-high">{{numeroCandidatos}}</div>
                                                    <div class="section__text--size-high"><ng-pluralize count="numeroCandidatos" when="{'0': 'Ningún Candidato','1': 'Candidato','other': 'Candidatos'}"></ng-pluralize></div>
                                                </div>
                                            </div>
                                        </div>
                                        <a ng-hide="numeroCandidatos===0" href="#/candidato/search/oferta/{{model.idOferta}}">
                                            <div class="panel-footer" style="background-color: #FFFFFF">
                                                <span class="pull-left">Ver los candidatos</span>
                                                <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                                <div class="clearfix"></div>
                                            </div>
                                        </a>
                                    </div>
                                </div> 


                            </div> 
                        </div>
                    </div>                     

                    <br>
                    <div class="row" >
                        <div class="col-xs-12 ">
                            <div class="pull-right">
                                <fpe-ok-button  ></fpe-ok-button>
                                <fpe-cancel-button  ></fpe-cancel-button>
                            </div>    
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
</div>

